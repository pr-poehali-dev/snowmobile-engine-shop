import { useState } from 'react';
import Header from '@/components/Header';
import Footer from '@/components/Footer';
import AIAssistant from '@/components/AIAssistant';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import Icon from '@/components/ui/icon';

const Catalog = () => {
  const [isAIOpen, setIsAIOpen] = useState(false);

  const categories = [
    {
      id: 'engines',
      name: 'Двигатели',
      icon: 'Cog',
      description: 'Бензиновые двигатели Lifan для снегоходов',
      content: `
## Двигатели Lifan для снегоходов

Линейка профессиональных бензиновых двигателей Lifan специально адаптирована для работы в суровых российских условиях. Каждый двигатель проходит заводской контроль качества и готов к установке.

### Почему выбирают Lifan?

**Надёжность:** Двухцилиндровые 4-тактные двигатели работают без поломок до 5000+ моточасов при правильном обслуживании.

**Экономичность:** Средний расход топлива 3-5 л/час — на 20-30% меньше аналогов. Это 200-300 литров экономии за сезон.

**Простота обслуживания:** Стандартные запчасти, понятная конструкция, доступная диагностика без сложного оборудования.

**Морозостойкость:** Запуск до -40°C без предпускового подогрева при использовании качественного масла.

### Модельный ряд

#### Lifan 27 л.с. (688 см³)
Оптимальный выбор для снегоходов весом до 350 кг. Идеально подходит для Бурана, самодельных лёгких конструкций.

- Мощность: 27 л.с. (21 кВт)
- Крутящий момент: 50 Н·м
- Запуск: Ручной + электростартер
- Вес: 60 кг
- Цена: от 69 990 ₽

#### Lifan 30 л.с. (724 см³)
Универсальный двигатель для средних снегоходов (350-450 кг). Оптимальный баланс мощности и экономичности.

- Мощность: 30 л.с. (23 кВт)
- Крутящий момент: 55 Н·м
- Запуск: Электростартер
- Вес: 62 кг
- Цена: от 79 990 ₽

#### Lifan 35 л.с. (845 см³)
Мощный вариант для тяжёлых снегоходов, горной местности, коммерческого использования.

- Мощность: 35 л.с. (27 кВт)
- Крутящий момент: 65 Н·м
- Запуск: Электростартер
- Вес: 68 кг
- Цена: от 94 990 ₽

### Комплектации

**Базовая:** Двигатель, электростартер, катушка освещения, инструкция.

**Полная:** Двигатель + выхлопная система + воздушный фильтр + крепёжный набор + адаптерная плита + редуктор (опционально) + расширенная инструкция.

### Гарантии

- 14 дней на проверку работоспособности
- Бесплатная замена при заводском браке
- Техническая поддержка на весь срок эксплуатации
      `,
      features: [
        '4-тактные двухцилиндровые',
        'Электростартер в комплекте',
        'Катушка освещения 20А',
        'Морозостойкие до -40°C'
      ]
    },
    {
      id: 'parts',
      name: 'Запчасти',
      icon: 'Settings',
      description: 'Оригинальные запчасти и расходники',
      content: `
## Запчасти для двигателей Lifan

Мы поставляем только оригинальные запчасти и проверенные расходники, которые обеспечивают долгий срок службы вашего двигателя.

### Расходные материалы

#### Моторные масла
Специально подобранные масла для работы в экстремальных условиях:

- **10W-40 полусинтетика** — универсальное всесезонное масло (от -25°C до +40°C), цена от 650 ₽/л
- **5W-30 синтетика** — для зимы (от -35°C до +25°C), цена от 850 ₽/л
- **0W-30 синтетика** — для экстремальных морозов (от -40°C), цена от 1200 ₽/л

Объём картера: 1,1-1,3 литра. Рекомендуемая замена: каждые 50 моточасов.

#### Фильтры
- **Воздушный фильтр** — защита от пыли и снега, замена каждые 100 моточасов, цена от 450 ₽
- **Топливный фильтр** — предотвращает засор карбюратора, замена раз в сезон, цена от 250 ₽
- **Масляный фильтр** (для моделей с масляным насосом) — замена вместе с маслом, цена от 350 ₽

#### Свечи зажигания
- **NGK BPR6ES** — стандартная свеча, цена от 180 ₽/шт
- **NGK Iridium** — иридиевая свеча (срок службы в 3 раза дольше), цена от 450 ₽/шт

Замена: каждые 100-150 моточасов или раз в сезон.

### Система запуска

- **Стартер электрический** — 12V, 0,8 кВт, цена от 3 500 ₽
- **Стартер ручной (веревка)** — для моделей с ручным запуском, цена от 450 ₽
- **Аккумулятор 12V 18Ah** — морозостойкий AGM, цена от 2 800 ₽
- **Катушка зажигания** — замена при слабой искре, цена от 1 200 ₽

### Топливная система

- **Карбюратор в сборе** — оригинальный, с заводской настройкой, цена от 2 500 ₽
- **Ремкомплект карбюратора** — мембраны, иглы, прокладки, цена от 650 ₽
- **Топливный кран** — вакуумный или механический, цена от 350 ₽
- **Топливный насос** — для моделей с инжектором, цена от 1 800 ₽

### Выхлопная система

- **Глушитель стандартный** — снижение шума до 85 дБ, цена от 3 200 ₽
- **Глушитель спортивный** — +5% мощности, 90 дБ, цена от 4 500 ₽
- **Прокладка выпускного коллектора** — медная, термостойкая, цена от 150 ₽

### Система охлаждения

- **Вентилятор охлаждения** — 12V, диаметр 200 мм, цена от 1 500 ₽
- **Датчик температуры** — включает вентилятор при 85°C, цена от 450 ₽

### Поршневая группа

- **Поршень с кольцами** — стандартный размер, цена от 2 800 ₽
- **Поршневые кольца** — комплект (компрессионные + маслосъёмное), цена от 650 ₽
- **Цилиндр** — замена при износе, цена от 4 500 ₽
- **Прокладка ГБЦ** — медная, цена от 250 ₽

### Система смазки

- **Масляный насос** — для моделей с принудительной смазкой, цена от 2 200 ₽
- **Сальники коленвала** — комплект (2 шт), цена от 350 ₽

### Комплекты для ТО

**Стандартное ТО (каждые 50 моточасов):**
- Масло 10W-40 (1,5 л)
- Воздушный фильтр
- Свеча зажигания
- Прокладка сливной пробки

Цена комплекта: 1 450 ₽ (экономия 200 ₽)

**Расширенное ТО (каждые 100 моточасов):**
- Масло 5W-30 (1,5 л)
- Воздушный фильтр
- Топливный фильтр
- Свеча Iridium
- Ремкомплект карбюратора

Цена комплекта: 2 850 ₽ (экономия 350 ₽)

### Доставка запчастей

- По Москве — курьером в день заказа (при заказе до 14:00)
- По России — СДЭК, ПЭК (2-5 дней)
- Бесплатная доставка при заказе от 3 000 ₽
      `,
      features: [
        'Оригинальные запчасти',
        'Всегда в наличии',
        'Комплекты для ТО со скидкой',
        'Быстрая доставка'
      ]
    },
    {
      id: 'accessories',
      name: 'Аксессуары',
      icon: 'Package',
      description: 'Дополнительное оборудование и инструменты',
      content: `
## Аксессуары и дополнительное оборудование

Всё необходимое для установки, обслуживания и улучшения вашего снегохода.

### Для установки двигателя

#### Адаптерные плиты
Переходные плиты для установки двигателя Lifan на различные модели снегоходов:

- **Для Бурана** — усиленная сталь 5 мм, цена от 3 500 ₽
- **Для Тайги** — алюминий, вес 2,5 кг, цена от 4 200 ₽
- **Для Рыси** — универсальная, регулируемая, цена от 4 800 ₽
- **Универсальная** — подходит для большинства самодельных конструкций, цена от 2 800 ₽

#### Крепёжные наборы
- **Стандартный набор** — болты, гайки, шайбы (всё для базовой установки), цена от 850 ₽
- **Усиленный набор** — с дополнительными виброгасящими элементами, цена от 1 450 ₽

#### Инструменты
- **Набор для установки** — ключи, головки, отвёртки, цена от 2 500 ₽
- **Динамометрический ключ** — для правильной затяжки болтов, цена от 1 800 ₽
- **Съёмник подшипников** — универсальный, цена от 950 ₽

### Система управления

- **Трос газа усиленный** — длина 150 см, в оплётке, цена от 450 ₽
- **Ручка газа с замком** — с подогревом (опционально), цена от 1 200 ₽
- **Панель приборов** — тахометр + вольтметр + датчик температуры, цена от 3 500 ₽
- **Кнопка аварийной остановки** — крепится на руль, цена от 350 ₽

### Электрооборудование

- **Генератор 300W** — для питания фар и подогрева, цена от 4 500 ₽
- **Выпрямитель 12V** — преобразует AC в DC, цена от 650 ₽
- **Фара светодиодная 40W** — яркость 4000 люмен, цена от 2 200 ₽
- **Задний фонарь LED** — стоп-сигнал + габариты, цена от 850 ₽
- **Проводка в сборе** — комплект с разъёмами, цена от 1 500 ₽

### Топливная система

- **Топливный бак 20 л** — пластик, морозостойкий, цена от 2 800 ₽
- **Топливный бак 30 л** — металл, с краном, цена от 4 500 ₽
- **Топливный шланг** — бензостойкий, 8 мм, цена от 120 ₽/метр
- **Топливный краник** — вакуумный, цена от 450 ₽
- **Канистра 20 л** — металлическая, с носиком, цена от 1 200 ₽

### Выхлопная система (тюнинг)

- **Прямоточный глушитель** — +8-10% мощности, цена от 6 500 ₽
- **Резонатор спортивный** — улучшает тягу на средних оборотах, цена от 3 800 ₽
- **Термолента для выхлопа** — снижает температуру в моторном отсеке, цена от 450 ₽

### Система охлаждения

- **Радиатор масляный** — для жаркого климата, цена от 3 500 ₽
- **Дефлектор воздушный** — направляет поток на цилиндры, цена от 650 ₽
- **Термостат** — поддерживает оптимальную температуру, цена от 850 ₽

### Защита и комфорт

- **Защита двигателя** — алюминиевая, защита от камней, цена от 2 500 ₽
- **Капот** — стеклопластик, цена от 4 500 ₽
- **Подогрев ручек руля** — 12V, 15W, цена от 1 200 ₽
- **Подогрев карбюратора** — предотвращает обледенение, цена от 850 ₽

### Диагностика и обслуживание

- **Мультиметр** — для диагностики электрики, цена от 650 ₽
- **Компрессометр** — проверка состояния поршневой, цена от 850 ₽
- **Стетоскоп механика** — поиск стуков и шумов, цена от 450 ₽
- **Набор для чистки карбюратора** — щётки, спреи, цена от 550 ₽

### Транспортировка и хранение

- **Чехол для двигателя** — защита от пыли и влаги, цена от 850 ₽
- **Ящик для инструментов** — 45 л, морозостойкий пластик, цена от 1 200 ₽
- **Такелажные ремни** — для погрузки двигателя, цена от 450 ₽

### Акции и комплекты

**Комплект "Всё для установки":**
- Адаптерная плита (Буран/Тайга)
- Крепёжный набор усиленный
- Трос газа
- Набор инструментов

Цена: 6 500 ₽ (экономия 1 000 ₽)

**Комплект "Освещение":**
- Генератор 300W
- Фара LED 40W
- Задний фонарь
- Проводка в сборе

Цена: 7 800 ₽ (экономия 900 ₽)
      `,
      features: [
        'Адаптерные плиты для всех моделей',
        'Электрооборудование',
        'Инструменты для установки',
        'Комплекты со скидкой'
      ]
    },
    {
      id: 'service',
      name: 'Сервис',
      icon: 'Wrench',
      description: 'Установка, ремонт и обслуживание',
      content: `
## Сервисное обслуживание

Мы не только продаём двигатели, но и помогаем с установкой, настройкой и ремонтом.

### Услуги по установке

#### Установка двигателя на снегоход
Полный цикл работ от демонтажа старого двигателя до первого запуска:

**Включает:**
- Демонтаж старого двигателя
- Подготовка посадочного места
- Установка адаптерной плиты
- Монтаж нового двигателя
- Подключение топливной системы
- Подключение электрики (стартер, освещение, приборы)
- Установка выхлопной системы
- Регулировка троса газа
- Заливка масла
- Первый запуск и настройка
- Обкатка (20 минут работы на холостых и средних оборотах)

**Время работы:** 4-6 часов  
**Цена:** от 15 000 ₽  
**Гарантия на работы:** 6 месяцев

#### Выездная установка
Наш мастер приедет к вам с инструментами и выполнит установку на месте.

**Доступно:**
- По Москве и МО (в радиусе 100 км от МКАД)
- Стоимость выезда: от 3 000 ₽
- Цена установки: от 18 000 ₽

**Время выполнения:** в течение 1 дня

### Техническое обслуживание

#### Базовое ТО (каждые 50 моточасов)
- Замена масла и фильтра
- Проверка свечи зажигания
- Чистка воздушного фильтра
- Проверка уровня топлива
- Визуальный осмотр на утечки
- Проверка затяжки болтов

**Время:** 30 минут  
**Цена:** от 1 500 ₽ (без стоимости расходников)  
**С расходниками:** от 2 800 ₽

#### Расширенное ТО (каждые 100 моточасов)
- Всё из базового ТО
- Замена воздушного и топливного фильтров
- Чистка карбюратора
- Регулировка клапанов
- Проверка компрессии
- Смазка тросов и рычагов
- Проверка системы зажигания

**Время:** 1,5-2 часа  
**Цена:** от 3 500 ₽ (без расходников)  
**С расходниками:** от 5 500 ₽

#### Предсезонная подготовка
Полная проверка перед началом зимнего сезона:

- Замена масла на зимнее (5W-30)
- Проверка аккумулятора (заряд, плотность электролита)
- Чистка карбюратора и замена топливного фильтра
- Проверка свечей зажигания
- Регулировка холостого хода
- Проверка компрессии
- Диагностика электрики (стартер, освещение, датчики)
- Смазка всех подвижных частей
- Проверка системы охлаждения
- Тестовый запуск в различных режимах

**Время:** 2-3 часа  
**Цена:** от 4 500 ₽ (без расходников)  
**С расходниками:** от 7 000 ₽

### Ремонт и диагностика

#### Диагностика двигателя
Комплексная проверка всех систем с использованием профессионального оборудования:

- Проверка компрессии в цилиндрах
- Диагностика системы зажигания
- Проверка карбюратора на производительность
- Тест электрики (генератор, стартер, катушка)
- Выявление причин повышенного расхода топлива/масла
- Составление отчёта с рекомендациями

**Время:** 1 час  
**Цена:** БЕСПЛАТНО (при последующем ремонте у нас)  
**Без ремонта:** 1 500 ₽

#### Ремонт карбюратора
- Полная разборка и чистка
- Замена изношенных деталей (мембраны, иглы)
- Регулировка состава смеси
- Настройка холостого хода

**Время:** 1-2 часа  
**Цена:** от 2 500 ₽ (с ремкомплектом)

#### Замена поршневой группы
Капитальный ремонт при износе цилиндро-поршневой группы:

- Демонтаж головки блока цилиндров
- Замена поршней, колец, прокладок
- Хонингование цилиндров (при необходимости)
- Сборка и регулировка
- Обкатка

**Время:** 4-6 часов  
**Цена:** от 8 000 ₽ (работа)  
**Запчасти:** от 6 000 ₽

#### Ремонт стартера
- Разборка и диагностика
- Замена щёток, бендикса, подшипников
- Проверка обмоток
- Сборка и тестирование

**Время:** 1-2 часа  
**Цена:** от 1 800 ₽ (работа)  
**Запчасти:** от 500 ₽

### Консультации

#### Онлайн-консультация
Бесплатная помощь по телефону или в Telegram:

- Подбор двигателя под ваш снегоход
- Советы по установке
- Диагностика проблем по описанию
- Рекомендации по обслуживанию

**Время работы:** Пн-Пт 9:00-18:00 МСК  
**Цена:** БЕСПЛАТНО

#### Видео-диагностика
Отправьте видео работы двигателя — мы определим проблему удалённо:

- Анализ звука двигателя
- Оценка дыма из выхлопа
- Определение причины нестабильной работы
- План ремонта с ценами

**Время ответа:** в течение 2 часов в рабочее время  
**Цена:** БЕСПЛАТНО

### Гарантийный сервис

Если в течение 14 дней вы обнаружили заводской дефект:

- Бесплатная диагностика
- Ремонт или замена за наш счёт
- Возврат денег при невозможности ремонта
- Компенсация доставки (туда и обратно)

**Для гарантийного случая нужно:**
- Сохранить чек и упаковку
- Не вскрывать двигатель самостоятельно
- Сообщить о проблеме в течение 24 часов после обнаружения

### Сервисные центры

**Москва:**
- Адрес: уточняйте по телефону
- Время работы: Пн-Сб 9:00-19:00

**Санкт-Петербург:**
- Партнёрский СЦ "Север"
- Тел: уточняйте по телефону

**Другие города:**
- Список партнёров на сайте
- Онлайн-консультации для всех регионов

### Абонементы на обслуживание

**"Сезонный"** — 2 ТО в год:
- Предсезонная подготовка
- ТО в середине сезона
- Скидка 15% на все работы

**Цена:** 11 000 ₽/год (экономия 2 000 ₽)

**"Профессиональный"** — для коммерческих снегоходов:
- 4 ТО в год
- Приоритетная запись
- Скидка 20% на запчасти
- Бесплатная диагностика

**Цена:** 22 000 ₽/год (экономия 5 000 ₽)
      `,
      features: [
        'Установка под ключ',
        'Техническое обслуживание',
        'Ремонт любой сложности',
        'Гарантия на работы'
      ]
    }
  ];

  return (
    <div className="min-h-screen flex flex-col bg-background">
      <Header activeSection="catalog" />
      
      <main className="flex-1">
        <section className="py-12 md:py-20">
          <div className="container px-4">
            <div className="max-w-6xl mx-auto">
              <div className="text-center mb-8 md:mb-12">
                <h1 className="text-3xl md:text-4xl lg:text-5xl font-bold mb-3 md:mb-4">
                  Каталог продукции
                </h1>
                <p className="text-base md:text-lg lg:text-xl text-muted-foreground">
                  Двигатели, запчасти, аксессуары и услуги для вашего снегохода
                </p>
              </div>

              <Tabs defaultValue="engines" className="w-full">
                <TabsList className="grid w-full grid-cols-2 lg:grid-cols-5 mb-8">
                  {categories.map((cat) => (
                    <TabsTrigger key={cat.id} value={cat.id} className="flex items-center gap-2">
                      <Icon name={cat.icon} size={18} />
                      <span className="hidden sm:inline">{cat.name}</span>
                    </TabsTrigger>
                  ))}
                </TabsList>

                {categories.map((cat) => (
                  <TabsContent key={cat.id} value={cat.id}>
                    <Card>
                      <CardHeader>
                        <div className="flex items-center gap-3 mb-2">
                          <Icon name={cat.icon} className="text-primary" size={32} />
                          <div>
                            <CardTitle className="text-2xl md:text-3xl">{cat.name}</CardTitle>
                            <CardDescription className="text-base">{cat.description}</CardDescription>
                          </div>
                        </div>
                      </CardHeader>
                      <CardContent>
                        <div className="grid md:grid-cols-2 gap-4 mb-6">
                          {cat.features.map((feature, idx) => (
                            <div key={idx} className="flex items-center gap-2">
                              <Icon name="Check" className="text-primary flex-shrink-0" size={20} />
                              <span>{feature}</span>
                            </div>
                          ))}
                        </div>

                        <div className="prose prose-slate max-w-none dark:prose-invert">
                          {cat.content.split('\n\n').map((paragraph, idx) => {
                            if (paragraph.startsWith('## ')) {
                              return <h2 key={idx} className="text-2xl md:text-3xl font-bold mt-8 mb-4">{paragraph.replace('## ', '')}</h2>;
                            } else if (paragraph.startsWith('### ')) {
                              return <h3 key={idx} className="text-xl md:text-2xl font-bold mt-6 mb-3">{paragraph.replace('### ', '')}</h3>;
                            } else if (paragraph.startsWith('#### ')) {
                              return <h4 key={idx} className="text-lg md:text-xl font-bold mt-4 mb-2">{paragraph.replace('#### ', '')}</h4>;
                            } else if (paragraph.startsWith('**') && paragraph.includes(':')) {
                              return <p key={idx} className="font-bold my-2">{paragraph.replace(/\*\*/g, '')}</p>;
                            } else if (paragraph.startsWith('- ')) {
                              const items = paragraph.split('\n').filter(item => item.startsWith('- '));
                              return (
                                <ul key={idx} className="list-disc list-inside space-y-2 my-4">
                                  {items.map((item, i) => (
                                    <li key={i}>{item.replace('- ', '').replace(/\*\*/g, '')}</li>
                                  ))}
                                </ul>
                              );
                            } else if (paragraph.trim()) {
                              return <p key={idx} className="my-4 text-muted-foreground leading-relaxed">{paragraph}</p>;
                            }
                            return null;
                          })}
                        </div>
                      </CardContent>
                    </Card>

                    <div className="mt-8">
                      <Card className="bg-muted/50">
                        <CardContent className="pt-6">
                          <div className="flex flex-col md:flex-row items-center gap-6">
                            <div className="flex-shrink-0">
                              <div className="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center">
                                <Icon name="Phone" className="text-primary" size={32} />
                              </div>
                            </div>
                            <div className="flex-1 text-center md:text-left">
                              <h3 className="text-xl font-bold mb-2">Нужна консультация?</h3>
                              <p className="text-muted-foreground">
                                Поможем подобрать оптимальное решение для вашего снегохода
                              </p>
                            </div>
                            <div className="flex flex-col sm:flex-row gap-3">
                              <a
                                href="tel:+79828202197"
                                className="inline-flex items-center justify-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors whitespace-nowrap"
                              >
                                <Icon name="Phone" size={18} />
                                Позвонить
                              </a>
                              <a
                                href="https://t.me/lifanburan"
                                target="_blank"
                                rel="noopener noreferrer"
                                className="inline-flex items-center justify-center gap-2 px-6 py-3 bg-[#0088cc] text-white rounded-lg hover:bg-[#0077b5] transition-colors whitespace-nowrap"
                              >
                                <Icon name="Send" size={18} />
                                Telegram
                              </a>
                            </div>
                          </div>
                        </CardContent>
                      </Card>
                    </div>
                  </TabsContent>
                ))}
              </Tabs>
            </div>
          </div>
        </section>
      </main>

      <Footer />
      <AIAssistant isOpen={isAIOpen} onClose={() => setIsAIOpen(false)} />
    </div>
  );
};

export default Catalog;
